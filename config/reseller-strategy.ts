/**
 * HARMONIC insight 繝ｪ繧ｻ繝ｩ繝ｼ繝ｻ雋ｩ螢ｲ莉｣逅・ｺ励ヱ繝ｼ繝医リ繝ｼ繝励Ο繧ｰ繝ｩ繝
 *
 * ============================================================================
 * 縲舌ヱ繝ｼ繝医リ繝ｼ繝励Ο繧ｰ繝ｩ繝縺ｮ險ｭ險域婿驥昴大・陬ｽ蜩・豕穂ｺｺ蜷代￠・・2B Only・・
 * ============================================================================
 *
 * ## 讎りｦ・
 * 蜈ｨ陬ｽ蜩√ｒ雋ｩ螢ｲ莉｣逅・ｺ暦ｼ医Μ繧ｻ繝ｩ繝ｼ/VAR・臥ｵ檎罰縺ｧ豕穂ｺｺ蜷代￠縺ｫ螻暮幕縺吶ｋ縺溘ａ縺ｮ繝代・繝医リ繝ｼ繝励Ο繧ｰ繝ｩ繝縲・
 * 繧ｳ繝ｳ繧ｵ繝ｫ繝・ぅ繝ｳ繧ｰ譯井ｻｶ縺ｨ騾｣蜍輔＠縺滓ｳ穂ｺｺ蜷代￠雋ｩ螢ｲ繧定｣懷ｮ後☆繧九メ繝｣繝阪Ν縲・
 *
 * ## 縺ｪ縺懊Μ繧ｻ繝ｩ繝ｼ縺悟ｿ・ｦ√°
 * - 閾ｪ遉ｾ縺縺代〒縺ｯ蛻ｰ驕斐〒縺阪↑縺・慍蝓溘・讌ｭ逡後∈縺ｮ繝ｪ繝ｼ繝∵僑螟ｧ
 * - 迴ｾ蝨ｰ隱槭〒縺ｮ繧ｵ繝昴・繝医・蟆主・謾ｯ謠ｴ縺ｮ謠蝉ｾ・
 * - 蝟ｶ讌ｭ繧ｳ繧ｹ繝医ｒ螟牙虚雋ｻ蛹厄ｼ亥｣ｲ繧後◆蛻・□縺代さ繝溘ャ繧ｷ繝ｧ繝ｳ・・
 * - 繝代・繝医リ繝ｼ莨∵･ｭ縺ｨ縺ｮ騾｣謳ｺ縺ｧ蝟ｶ讌ｭ蜉帙ｒ陬懷ｮ・
 *
 * ## 繝代・繝医リ繝ｼ遞ｮ蛻･
 *
 * 笏娯楳笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏・
 * 笏・ Registered        Silver            Gold                     笏・
 * 笏・ 笏笏笏笏笏笏笏笏笏笏        笏笏笏笏笏笏            笏笏笏笏                     笏・
 * 笏・ 隱ｰ縺ｧ繧ょ盾蜉蜿ｯ      蟷ｴ髢捺園螳壻ｻｶ謨ｰ莉･荳・  荳贋ｽ榊ｮ溽ｸｾ                  笏・
 * 笏・ 髱樒峡蜊            髱樒峡蜊            蝨ｰ蝓溽峡蜊蜿ｯ               笏・
 * 笏・ 繧ｻ繝ｫ繝輔し繝ｼ繝・     蟆ゆｻｻ諡・ｽ・         蟆ゆｻｻ諡・ｽ・蜈ｱ蜷後・繝ｼ繧ｱ      笏・
 * 笏披楳笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏笏・
 *
 * ## 繝ｪ繧ｻ繝ｩ繝ｼ蟇ｾ雎｡陬ｽ蜩・
 * 蜈ｨ陬ｽ蜩√′繝代・繝医リ繝ｼ邨檎罰縺ｧ雋ｩ螢ｲ蜿ｯ閭ｽ縲・
 * 縺溘□縺・Tier 1・・NCA/INBT/IVIN・峨・ Gold 繝代・繝医リ繝ｼ縺ｮ縺ｿ縲・
 *
 * ## 萓｡譬ｼ繝ｻ繧ｳ繝溘ャ繧ｷ繝ｧ繝ｳ
 * 莉募・繧悟､蠑慕紫繝ｻ繧ｳ繝溘ャ繧ｷ繝ｧ繝ｳ邇・・繝代・繝医リ繝ｼ縺ｨ縺ｮ蛟句挨蜊碑ｭｰ縺ｫ繧医ｊ豎ｺ螳壹・
 * 譛ｬ繝輔ぃ繧､繝ｫ縺ｫ縺ｯ繝・ぅ繧｢讒矩縺ｨ雋ｩ螢ｲ譚｡莉ｶ縺ｮ譫邨・∩縺ｮ縺ｿ螳夂ｾｩ縲・
 */

import type { ProductCode } from './products';

// =============================================================================
// 蝙句ｮ夂ｾｩ
// =============================================================================

/** 繝代・繝医リ繝ｼ繝・ぅ繧｢ */
export type PartnerTier = 'registered' | 'silver' | 'gold';

/** 繝代・繝医リ繝ｼ遞ｮ蛻･ */
export type PartnerType =
  | 'reseller'        // 繝ｪ繧ｻ繝ｩ繝ｼ・井ｻ募・繧娯・蜀崎ｲｩ・・
  | 'referral'        // 邏ｹ莉九ヱ繝ｼ繝医リ繝ｼ・医Μ繝ｼ繝臥ｴｹ莉九・縺ｿ・・
  | 'var';            // VAR: Value Added Reseller・亥・雋ｩ+蟆主・謾ｯ謠ｴ・・

/** 繧ｳ繝溘ャ繧ｷ繝ｧ繝ｳ繝｢繝・Ν */
export type CommissionModel =
  | 'wholesale_discount'   // 莉募・繧悟､蠑輔″繝｢繝・Ν・医Μ繧ｻ繝ｩ繝ｼ・・
  | 'revenue_share'        // 繝ｬ繝吶ル繝･繝ｼ繧ｷ繧ｧ繧｢繝｢繝・Ν・育ｴｹ莉具ｼ・
  | 'margin_based';        // 繝槭・繧ｸ繝ｳ繝｢繝・Ν・・AR・・

/** 繝代・繝医リ繝ｼ繝・ぅ繧｢螳夂ｾｩ */
export interface PartnerTierDefinition {
  tier: PartnerTier;
  name: string;
  nameJa: string;
  /** 蝨ｰ蝓溽峡蜊讓ｩ縺ｮ莉倅ｸ主庄蜷ｦ */
  exclusivityAvailable: boolean;
  /** 蟆ゆｻｻ繝代・繝医リ繝ｼ繝槭ロ繝ｼ繧ｸ繝｣繝ｼ */
  dedicatedManager: boolean;
  /** 繝ｪ繝ｼ繝画署萓・*/
  leadSharing: boolean;
  /** 繝代・繝医リ繝ｼ繝昴・繧ｿ繝ｫ繧｢繧ｯ繧ｻ繧ｹ */
  portalAccess: boolean;
  /** 雋ｩ螢ｲ繝ｻ謚陦薙ヨ繝ｬ繝ｼ繝九Φ繧ｰ */
  trainingIncluded: boolean;
  /** 繝・Δ迺ｰ蠅・・謠蝉ｾ・*/
  demoEnvironment: boolean;
  /** 隱ｬ譏・*/
  description: string;
}

/** 繝代・繝医リ繝ｼ螂醍ｴ・擅莉ｶ */
export interface PartnerAgreementTerms {
  /** 螂醍ｴ・悄髢難ｼ域怦・・*/
  contractDurationMonths: number;
  /** 閾ｪ蜍墓峩譁ｰ */
  autoRenewal: boolean;
  /** 隗｣邏・ｺ亥相譛滄俣・域怦・・*/
  terminationNoticePeriod: number;
  /** 謾ｯ謇輔し繧､繝茨ｼ域律・・*/
  paymentTermsDays: number;
  /** 鬘ｧ螳｢縺ｮ謇譛画ｨｩ */
  customerOwnership: string;
  /** 繧ｵ繝昴・繝郁ｲｬ莉ｻ蛻・球 */
  supportResponsibility: string;
}

/** 繝ｪ繧ｻ繝ｩ繝ｼ蟇ｾ雎｡陬ｽ蜩√・譚｡莉ｶ */
export interface ResellerProductTerms {
  productCode: ProductCode;
  /** 繝ｪ繧ｻ繝ｩ繝ｼ雋ｩ螢ｲ蜿ｯ閭ｽ縺・*/
  resellerEnabled: boolean;
  /** 雋ｩ螢ｲ縺ｫ蠢・ｦ√↑譛菴弱ヱ繝ｼ繝医リ繝ｼ繝・ぅ繧｢ */
  minimumTier: PartnerTier;
  /** 繝・Δ繝ｩ繧､繧ｻ繝ｳ繧ｹ謠蝉ｾ帶焚・医ヱ繝ｼ繝医リ繝ｼ縺ゅ◆繧奇ｼ・*/
  demoLicenses: number;
  /** NFR・・ot For Resale・峨Λ繧､繧ｻ繝ｳ繧ｹ謠蝉ｾ帶焚 */
  nfrLicenses: number;
  /** 蛯呵・*/
  notes: string;
}

// =============================================================================
// 繝代・繝医リ繝ｼ繝・ぅ繧｢螳夂ｾｩ
// =============================================================================

export const PARTNER_TIERS: Record<PartnerTier, PartnerTierDefinition> = {

  /**
   * Registered 繝代・繝医リ繝ｼ
   * - 蜿ょ刈髫懷｣・ 縺ｪ縺暦ｼ育筏隲銀・蟇ｩ譟ｻ竊呈価隱搾ｼ・
   * - 諠ｳ螳・ 荳ｭ蟆終T莨∵･ｭ縲√ヵ繝ｪ繝ｼ繝ｩ繝ｳ繧ｹ繧ｳ繝ｳ繧ｵ繝ｫ繧ｿ繝ｳ繝・
   * - InsightOffice Suite・・ier 3・・ ISOF 縺ｮ縺ｿ雋ｩ螢ｲ蜿ｯ閭ｽ
   */
  registered: {
    tier: 'registered',
    name: 'Registered Partner',
    nameJa: '逋ｻ骭ｲ繝代・繝医リ繝ｼ',
    exclusivityAvailable: false,
    dedicatedManager: false,
    leadSharing: false,
    portalAccess: true,
    trainingIncluded: true,
    demoEnvironment: true,
    description: '隱ｰ縺ｧ繧ょ盾蜉蜿ｯ閭ｽ縲５ier 3+4 陬ｽ蜩・ｼ・nsightOffice Suite / ISOF・峨・縺ｿ雋ｩ螢ｲ蜿ｯ閭ｽ縲・,
  },

  /**
   * Silver 繝代・繝医リ繝ｼ
   * - 諠ｳ螳・ 荳ｭ蝣・T莨∵･ｭ縲√さ繝ｳ繧ｵ繝ｫ繝輔ぃ繝ｼ繝
   * - InsightOffice Suite + Tier 2・・NMV/INIG・峨′雋ｩ螢ｲ蜿ｯ閭ｽ
   */
  silver: {
    tier: 'silver',
    name: 'Silver Partner',
    nameJa: '繧ｷ繝ｫ繝舌・繝代・繝医リ繝ｼ',
    exclusivityAvailable: false,
    dedicatedManager: true,
    leadSharing: true,
    portalAccess: true,
    trainingIncluded: true,
    demoEnvironment: true,
    description: '螳溽ｸｾ縺ｫ蝓ｺ縺･縺肴・譬ｼ縲５ier 2+3+4 陬ｽ蜩√′雋ｩ螢ｲ蜿ｯ閭ｽ縲ょｰゆｻｻ諡・ｽ薙・繝ｪ繝ｼ繝牙・譛峨≠繧翫・,
  },

  /**
   * Gold 繝代・繝医リ繝ｼ
   * - 諠ｳ螳・ 螟ｧ謇鬼Ier縲√さ繝ｳ繧ｵ繝ｫ繝輔ぃ繝ｼ繝
   * - 蜈ｨ陬ｽ蜩・ｼ・ier 1蜷ｫ繧・峨′雋ｩ螢ｲ蜿ｯ閭ｽ縲∝慍蝓溽峡蜊讓ｩ縺ゅｊ
   */
  gold: {
    tier: 'gold',
    name: 'Gold Partner',
    nameJa: '繧ｴ繝ｼ繝ｫ繝峨ヱ繝ｼ繝医リ繝ｼ',
    exclusivityAvailable: true,
    dedicatedManager: true,
    leadSharing: true,
    portalAccess: true,
    trainingIncluded: true,
    demoEnvironment: true,
    description: '荳贋ｽ榊ｮ溽ｸｾ縺ｧ譏・ｼ縲ょ・陬ｽ蜩∬ｲｩ螢ｲ蜿ｯ閭ｽ縲ょ慍蝓溽峡蜊讓ｩ縺ｮ蜊碑ｭｰ蜿ｯ縲・,
  },
};

// =============================================================================
// 螂醍ｴ・擅莉ｶ
// =============================================================================

export const STANDARD_AGREEMENT_TERMS: PartnerAgreementTerms = {
  contractDurationMonths: 12,
  autoRenewal: true,
  terminationNoticePeriod: 3,
  paymentTermsDays: 30,
  customerOwnership:
    '繧ｨ繝ｳ繝峨Θ繝ｼ繧ｶ繝ｼ縺ｨ縺ｮ繝ｩ繧､繧ｻ繝ｳ繧ｹ螂醍ｴ・・HARMONIC insight縺檎峩謗･邱邨舌・ +
    '繝代・繝医リ繝ｼ縺ｯ雋ｩ螢ｲ莉｣逅・→縺励※邏ｹ莉九・蟆主・謾ｯ謠ｴ繧定｡後≧縲・ +
    '鬘ｧ螳｢繝ｪ繧ｹ繝医・繝代・繝医リ繝ｼ縺ｨ蜈ｱ譛峨＠縲∵峩譁ｰ譎ゅ・繧ｳ繝溘ャ繧ｷ繝ｧ繝ｳ繧剃ｿ晁ｨｼ縲・,
  supportResponsibility:
    '1谺｡繧ｵ繝昴・繝茨ｼ域桃菴懈婿豕輔・FAQ・・ 繝代・繝医リ繝ｼ縺悟ｯｾ蠢懶ｼ医ヨ繝ｬ繝ｼ繝九Φ繧ｰ謠蝉ｾ幢ｼ峨・ +
    '2谺｡繧ｵ繝昴・繝茨ｼ医ヰ繧ｰ繝ｻ謚陦鍋噪蝠城｡鯉ｼ・ HARMONIC insight縺悟ｯｾ蠢懊・ +
    '繝代・繝医リ繝ｼ繝昴・繧ｿ繝ｫ邨檎罰縺ｧ繧ｨ繧ｹ繧ｫ繝ｬ繝ｼ繧ｷ繝ｧ繝ｳ縲・,
};

// =============================================================================
// 陬ｽ蜩∝挨繝ｪ繧ｻ繝ｩ繝ｼ譚｡莉ｶ
// =============================================================================

/**
 * 蜈ｨ陬ｽ蜩√・繝ｪ繧ｻ繝ｩ繝ｼ雋ｩ螢ｲ譚｡莉ｶ
 *
 * 縲先婿驥昴・
 * - Tier 1・・NCA/INBT/IVIN・・ Gold 繝代・繝医リ繝ｼ縺ｮ縺ｿ雋ｩ螢ｲ蜿ｯ閭ｽ
 * - Tier 2・・NMV/INIG・・ Silver 莉･荳翫〒雋ｩ螢ｲ蜿ｯ閭ｽ
 * - Tier 3・・NSS/IOSH/IOSD/INPY・・ 蜈ｨ繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ
 * - Tier 4・・SOF・・ 蜈ｨ繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ
 */
export const RESELLER_PRODUCT_TERMS: Record<ProductCode, ResellerProductTerms> = {

  // =========================================================================
  // Tier 1: 讌ｭ蜍吝､蛾擠繝・・繝ｫ 窶・Gold 繝代・繝医リ繝ｼ縺ｮ縺ｿ
  // =========================================================================

  INCA: {
    productCode: 'INCA',
    resellerEnabled: true,
    minimumTier: 'gold',
    demoLicenses: 2,
    nfrLicenses: 1,
    notes: 'RPA遘ｻ陦後い繧ｻ繧ｹ繝｡繝ｳ繝医ヤ繝ｼ繝ｫ縲・old繝代・繝医リ繝ｼ縺ｮ縺ｿ縲ゅさ繝ｳ繧ｵ繝ｫ譯井ｻｶ縺ｨ騾｣蜍輔＠縺滓署譯医′蜑肴署縲・,
  },
  INBT: {
    productCode: 'INBT',
    resellerEnabled: true,
    minimumTier: 'gold',
    demoLicenses: 2,
    nfrLicenses: 1,
    notes: '讌ｭ蜍呵・蜍募喧RPA繝・・繝ｫ縲・old繝代・繝医リ繝ｼ縺ｮ縺ｿ縲り・蜍募喧繧ｳ繝ｳ繧ｵ繝ｫ縺ｨ繧ｻ繝・ヨ縺ｧ縺ｮ謠先｡医′蜑肴署縲・,
  },
  IVIN: {
    productCode: 'IVIN',
    resellerEnabled: true,
    minimumTier: 'gold',
    demoLicenses: 1,
    nfrLicenses: 1,
    notes: '髱｢謗･蛻・梵繝ｻ謗｡逕ｨ謾ｯ謠ｴ繝・・繝ｫ縲・old繝代・繝医リ繝ｼ縺ｮ縺ｿ縲・,
  },

  // =========================================================================
  // Tier 2: AI豢ｻ逕ｨ繝・・繝ｫ 窶・Silver 莉･荳・
  // =========================================================================

  INMV: {
    productCode: 'INMV',
    resellerEnabled: true,
    minimumTier: 'silver',
    demoLicenses: 3,
    nfrLicenses: 1,
    notes: 'AI蜍慕判菴懈・繝・・繝ｫ縲４ilver莉･荳翫・繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ縲ら比ｿｮ繝ｻ繝槭ル繝･繧｢繝ｫ蜍慕判譯井ｻｶ縺ｫ譛牙柑縲・,
  },
  INIG: {
    productCode: 'INIG',
    resellerEnabled: true,
    minimumTier: 'silver',
    demoLicenses: 3,
    nfrLicenses: 1,
    notes: 'AI逕ｻ蜒上・髻ｳ螢ｰ逕滓・繝・・繝ｫ縲４ilver莉･荳翫・繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ縲・,
  },

  // =========================================================================
  // Tier 3: InsightOffice Suite 窶・蜈ｨ繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ
  // =========================================================================

  INSS: {
    productCode: 'INSS',
    resellerEnabled: true,
    minimumTier: 'registered',
    demoLicenses: 5,
    nfrLicenses: 2,
    notes: 'PowerPoint繝・・繝ｫ縲ょ・繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ縲よｳ穂ｺｺ蟆主・縺ｮ荳ｻ蜉幄｣ｽ蜩√・,
  },
  IOSH: {
    productCode: 'IOSH',
    resellerEnabled: true,
    minimumTier: 'registered',
    demoLicenses: 5,
    nfrLicenses: 2,
    notes: 'Excel邂｡逅・ヤ繝ｼ繝ｫ縲ょ・繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ縲ゅメ繝ｼ繝蟆主・譯井ｻｶ縺ｯPRO繧呈耳螂ｨ縲・,
  },
  IOSD: {
    productCode: 'IOSD',
    resellerEnabled: true,
    minimumTier: 'registered',
    demoLicenses: 5,
    nfrLicenses: 2,
    notes: 'Word譁・嶌邂｡逅・ヤ繝ｼ繝ｫ縲ょ・繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ縲ゅラ繧ｭ繝･繝｡繝ｳ繝育ｮ｡逅・｡井ｻｶ縺ｫ譛牙柑縲・,
  },
  INPY: {
    productCode: 'INPY',
    resellerEnabled: true,
    minimumTier: 'registered',
    demoLicenses: 5,
    nfrLicenses: 2,
    notes: 'Python螳溯｡悟渕逶､縲ょ・繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ縲よ･ｭ蜍呵・蜍募喧譯井ｻｶ縺ｫ譛牙柑縲・,
  },

  // =========================================================================
  // Tier 4: Insight Senior Office 窶・蜈ｨ繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ
  // =========================================================================

  ISOF: {
    productCode: 'ISOF',
    resellerEnabled: true,
    minimumTier: 'registered',
    demoLicenses: 10,
    nfrLicenses: 3,
    notes: '繧ｷ繝九い蜷代￠邨ｱ蜷医が繝輔ぅ繧ｹ繝・・繝ｫ縲ょ・繝代・繝医リ繝ｼ縺瑚ｲｩ螢ｲ蜿ｯ閭ｽ縲り・豐ｻ菴薙・遖冗･画ｳ穂ｺｺ譯井ｻｶ縺ｫ譛牙柑縲ゅョ繝｢繝ｩ繧､繧ｻ繝ｳ繧ｹ螟壹ａ・亥ｰ主・隱ｬ譏惹ｼ夂畑・峨・,
  },
};

// =============================================================================
// 繝倥Ν繝代・髢｢謨ｰ
// =============================================================================

/**
 * 繝代・繝医リ繝ｼ繝・ぅ繧｢縺ｮ譚｡莉ｶ繧貞叙蠕・
 */
export function getPartnerTier(tier: PartnerTier): PartnerTierDefinition {
  return PARTNER_TIERS[tier];
}

/**
 * 謖・ｮ壹ユ繧｣繧｢縺ｧ雋ｩ螢ｲ蜿ｯ閭ｽ縺ｪ陬ｽ蜩∽ｸ隕ｧ繧貞叙蠕・
 */
export function getResellerProducts(tier?: PartnerTier): ProductCode[] {
  const tierPriority: Record<PartnerTier, number> = {
    registered: 0,
    silver: 1,
    gold: 2,
  };

  return (Object.keys(RESELLER_PRODUCT_TERMS) as ProductCode[]).filter(code => {
    const terms = RESELLER_PRODUCT_TERMS[code];
    if (!terms.resellerEnabled) return false;
    if (!tier) return true;
    return tierPriority[tier] >= tierPriority[terms.minimumTier];
  });
}

/**
 * 繝・ぅ繧｢譏・ｼ縺ｫ蠢・ｦ√↑谺｡縺ｮ繝・ぅ繧｢繧貞叙蠕・
 */
export function getNextTier(currentTier: PartnerTier): PartnerTier | null {
  if (currentTier === 'gold') return null;
  return currentTier === 'registered' ? 'silver' : 'gold';
}

// =============================================================================
// 繧ｨ繧ｯ繧ｹ繝昴・繝・
// =============================================================================

export default {
  PARTNER_TIERS,
  STANDARD_AGREEMENT_TERMS,
  RESELLER_PRODUCT_TERMS,
  getPartnerTier,
  getResellerProducts,
  getNextTier,
};
