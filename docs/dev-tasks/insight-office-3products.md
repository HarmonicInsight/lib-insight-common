# Insight Business Suite ── 開発タスク一覧

> 作成日: 2026年2月22日
> 対象: InsightSheet / InsightSlide / InterviewInsight
> 前提: data-collection.ts（データ収集アーキテクチャ）、products.ts（製品定義）、戦略文書

---

## 全体像: 3製品の役割と開発フォーカス

```
┌─────────────────────────────────────────────────────────────────┐
│  Insight Business Suiteの開発スコープ                                │
│                                                                 │
│  ① InsightSheet（基盤・最大の開発量）                      │
│     既存: Syncfusion層（Excel表示・バージョン管理）               │
│     新規: データ収集層（JSONB）+ 収集管理UI + AI連携              │
│                                                                 │
│  ② InsightSlide（既存機能の拡充）                                │
│     既存: PPTX差分・マージ・AIレビュー                            │
│     新規: AI連携強化 + UX改善                                    │
│                                                                 │
│  ③ InterviewInsight（新規開発）                                  │
│     既存: 設計のみ                                               │
│     新規: 音声文字起こし + AI分類 + インタビューシート             │
│                                                                 │
│  ④ 共通基盤（3製品横断）                                        │
│     認証・認可 / AI連携エンジン / 多言語 / ライセンス管理          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## ① InsightSheet ── 開発タスク

### A. 既存 Syncfusion層の強化

| # | タスク | 優先度 | 概要 | 備考 |
|---|--------|--------|------|------|
| A-1 | バージョン管理エンジン | P0 | 保存のたびにバージョン作成、任意の2バージョン比較 | 差分表示はセル単位 |
| A-2 | セル変更履歴の記録 | P0 | 誰が・いつ・どのセルを・何から何に変更したかの監査証跡 | Syncfusion APIのイベントフック |
| A-3 | 差分表示UI | P1 | 2バージョンのサイドバイサイド比較画面、変更セルのハイライト | |
| A-4 | 共有サーバーモード | P1 | ファイルをサーバーに置いて複数ユーザーで閲覧・編集 | ロック機能必要（楽観的/悲観的） |
| A-5 | 掲示板機能 | P2 | 特定セル/範囲にコメント・ディスカッションをスレッド形式で | |
| A-6 | .xlsx入出力の最適化 | P1 | Syncfusionによるネイティブ.xlsx生成・読み込みの安定化 | MS Office不要の訴求根拠 |

### B. データ収集層（JSONB）── 新規開発

| # | タスク | 優先度 | 概要 | 備考 |
|---|--------|--------|------|------|
| B-1 | 物理DB設計・マイグレーション | P0 | `collection_templates` + `collection_submissions` テーブル作成 | data-collection.ts参照 |
| B-2 | JSON Schema定義エンジン | P0 | CollectionTemplate → JSON Schema自動生成 | `generateJsonSchema()` の実装 |
| B-3 | テーブル定義管理UI | P0 | 管理者がJSON Schema（論理テーブル）をGUIで定義・編集 | AI自動生成オプション付き |
| B-4 | Excel→JSON変換エンジン | P0 | excelColumn定義に基づいてExcelのセル値をJSONに抽出 | `buildExcelMapping()` の実装 |
| B-5 | JSON Schema Validation | P0 | 提出データをJSON Schemaでバリデーション、エラー詳細返却 | ajv等のライブラリ活用 |
| B-6 | 提出ステータス管理 | P1 | draft→submitted→validated→approved/rejected のワークフロー | |
| B-7 | 収集ダッシュボード | P1 | 提出状況一覧・エラー状況・未提出アラート・期限管理 | |
| B-8 | リマインダー自動送信 | P2 | 未提出拠点への自動催促（メール/Slack通知） | |
| B-9 | データエクスポート | P1 | JSON→CSV/Excel/API出力。BI連携用 | |
| B-10 | テンプレートバージョニング | P2 | スキーマ変更時の既存データとの互換性管理 | |

### C. AI連携

| # | タスク | 優先度 | 概要 | 備考 |
|---|--------|--------|------|------|
| C-1 | AI数式アシスタント | P1 | 数式チェック・エラー検出・修正提案 | Syncfusion層のExcelデータ対象 |
| C-2 | AIチャット（スプレッドシート） | P1 | 「この表の売上合計は？」等の自然言語質問 | セルデータをコンテキストに |
| C-3 | AI異常値検知 | P2 | 収集データのJSONBから異常値を自動検出 | データ収集層のJSONB対象 |
| C-4 | AIコンテキスト生成 | P1 | `generateAiContext()` でテンプレート+データをAIに渡す | data-collection.ts参照 |
| C-5 | AIテーブル定義自動生成 | P2 | 「月次報告のテンプレートを作って」→ JSON Schema自動生成 | |
| C-6 | AIモデルルーティング | P1 | Haiku/Sonnet/Opus の自動選択（コスト最適化） | InsightSlideと共通化 |

### D. インフラ・非機能

| # | タスク | 優先度 | 概要 |
|---|--------|--------|------|
| D-1 | PostgreSQL JSONB環境構築 | P0 | GINインデックス含むDB環境 |
| D-2 | API設計（REST/GraphQL） | P0 | テンプレートCRUD、提出CRUD、バリデーション等 |
| D-3 | パフォーマンステスト | P2 | JSONB検索のレスポンスタイム検証（100拠点×12ヶ月分等） |
| D-4 | データバックアップ・リストア | P1 | JSONB含むバックアップ戦略 |

---

## ② InsightSlide ── 開発タスク

### E. 既存機能の安定化・拡充

| # | タスク | 優先度 | 概要 | 備考 |
|---|--------|--------|------|------|
| E-1 | PPTXテキスト抽出エンジン | P0 | .pptxからテキスト・スピーチノート全抽出 | 既存実装の安定化 |
| E-2 | PPTX差分比較エンジン | P0 | 2つのPPTXのスライド単位・テキスト単位の差分検出 | 「唯一の機能」＝最大の差別化 |
| E-3 | PPTXマージ機能 | P1 | 差分を選択的にマージ。コンフリクト解決UI | |
| E-4 | PPTXへの書き戻し | P1 | AI修正結果を元のPPTXに書き戻すクローズドループ | |
| E-5 | Excelエクスポート/インポート | P0 | 全スライドのテキストをExcelに出力 → 編集 → PPTXに取り込み | ラウンドトリップの品質確保 |

### F. AIレビュー機能

| # | タスク | 優先度 | 概要 | 備考 |
|---|--------|--------|------|------|
| F-1 | 13プリセットAIプロンプト実装 | P0 | 用語統一・論理チェック・誤字脱字・多言語翻訳等 | プロンプト設計済み |
| F-2 | カスタムプロンプト追加 | P1 | ユーザー独自のレビュー観点を追加可能に | |
| F-3 | AIレビュー結果表示UI | P0 | 指摘箇所のハイライト、修正提案の表示、一括適用 | |
| F-4 | バッチレビュー | P1 | 100ページ超の大量スライドを効率的にAI処理 | ページネーション・プログレス表示 |
| F-5 | AIモデルルーティング | P1 | 誤字脱字→Haiku、論理チェック→Sonnet、高度な分析→Opus | InsightSheetと共通化 |

### G. スピーチノート管理

| # | タスク | 優先度 | 概要 |
|---|--------|--------|------|
| G-1 | Excelからスピーチノート登録 | P1 | Excel上でスピーチノートを一括編集→PPTXに反映 |
| G-2 | 多言語翻訳ワークフロー | P2 | Excel出力→翻訳（AI or 人手）→PPTX取り込み |

---

## ③ InterviewInsight ── 開発タスク

### H. コア機能（新規開発）

| # | タスク | 優先度 | 概要 | 備考 |
|---|--------|--------|------|------|
| H-1 | インタビューシートテンプレート | P0 | 事前設定可能な質問リスト・回答枠の定義UI | |
| H-2 | 音声入力・リアルタイム文字起こし | P0 | ブラウザ or アプリでの音声録音 → リアルタイムテキスト化 | Web Speech API / Whisper等 |
| H-3 | 回答の自動登録 | P0 | 文字起こし結果をインタビューシートの該当質問に自動マッピング | |
| H-4 | AI分類・要約エンジン | P0 | 回答を「問題点」「課題」「タスク」「完了作業」に自動分類 | |
| H-5 | インサイト抽出 | P1 | 複数インタビューの横断分析、共通パターンの検出 | |
| H-6 | レポート自動生成 | P1 | インタビュー結果サマリーのExcel/PDF出力 | |

### I. 音声技術

| # | タスク | 優先度 | 概要 | 備考 |
|---|--------|--------|------|------|
| I-1 | 音声認識エンジン選定・統合 | P0 | Whisper / Google Speech / Azure Speech 等の比較検証 | 日本語精度が最重要 |
| I-2 | 話者分離 | P2 | 複数人同時インタビュー時の話者特定 | |
| I-3 | ノイズ除去 | P1 | 現場環境（会議室、工場等）でのノイズ対策 | |

### J. UX・ワークフロー

| # | タスク | 優先度 | 概要 |
|---|--------|--------|------|
| J-1 | インタビュー実施画面 | P0 | 質問表示 + 録音ボタン + リアルタイムテキスト表示 |
| J-2 | 回答一覧・編集画面 | P1 | 文字起こし結果の確認・手動修正 |
| J-3 | AI分類結果ダッシュボード | P1 | 問題/課題/タスクの一覧、フィルタリング、優先度付け |
| J-4 | リモートインタビュー対応 | P2 | Web会議的なリモート接続でのインタビュー実施 |

---

## ④ 共通基盤 ── 3製品横断の開発タスク

### K. 認証・認可

| # | タスク | 優先度 | 概要 |
|---|--------|--------|------|
| K-1 | ユーザー認証基盤 | P0 | ログイン・セッション管理（SSO対応検討） |
| K-2 | ロール・権限管理 | P0 | 管理者/一般ユーザー/閲覧者等の権限制御 |
| K-3 | 組織・テナント管理 | P1 | マルチテナント対応（顧客企業ごとの分離） |

### L. AI共通エンジン

| # | タスク | 優先度 | 概要 |
|---|--------|--------|------|
| L-1 | LLM API統合レイヤー | P0 | Claude API接続、プロンプト管理、レスポンスパース |
| L-2 | モデルルーティングエンジン | P1 | タスク種類に応じてHaiku/Sonnet/Opusを自動選択 |
| L-3 | コスト管理・使用量トラッキング | P1 | 顧客別・機能別のAI使用量集計 |
| L-4 | プロンプトテンプレート管理 | P1 | 各製品のAIプロンプトの一元管理・バージョニング |

### M. 多言語・UI

| # | タスク | 優先度 | 概要 |
|---|--------|--------|------|
| M-1 | i18nフレームワーク | P1 | 日本語/英語/中国語の3言語対応基盤 |
| M-2 | 共通UIコンポーネント | P1 | ダッシュボード・テーブル・フォーム等の共通化 |
| M-3 | レスポンシブ対応 | P2 | タブレット・モバイル対応（特にInterviewInsight） |

### N. ライセンス・デプロイ

| # | タスク | 優先度 | 概要 |
|---|--------|--------|------|
| N-1 | ライセンス管理機能 | P1 | ベースライセンス(200万)の有効化・期限管理 |
| N-2 | オンプレ/クラウド両対応 | P1 | 共有サーバー配置 or クラウドSaaSの選択肢 |
| N-3 | インストーラー（オンプレ） | P2 | 企業の社内サーバーへの導入パッケージ |
| N-4 | CI/CD パイプライン | P1 | ビルド・テスト・デプロイの自動化 |

---

## 開発優先順位サマリー（P0タスク = MVP必須）

### Phase 1 MVP（2026年5-7月目標）── P0タスク

```
InsightSheet（11タスク ★ 最大の開発量）
  A-1  バージョン管理エンジン
  A-2  セル変更履歴の記録
  A-6  .xlsx入出力の最適化
  B-1  物理DB設計（JSONB）
  B-2  JSON Schema定義エンジン
  B-3  テーブル定義管理UI
  B-4  Excel→JSON変換エンジン
  B-5  JSON Schema Validation
  D-1  PostgreSQL JSONB環境構築
  D-2  API設計

InsightSlide（4タスク）
  E-1  PPTXテキスト抽出エンジン
  E-2  PPTX差分比較エンジン
  E-5  Excelエクスポート/インポート
  F-1  13プリセットAIプロンプト実装
  F-3  AIレビュー結果表示UI

InterviewInsight（5タスク）
  H-1  インタビューシートテンプレート
  H-2  音声入力・リアルタイム文字起こし
  H-3  回答の自動登録
  H-4  AI分類・要約エンジン
  I-1  音声認識エンジン選定・統合

共通基盤（3タスク）
  K-1  ユーザー認証基盤
  K-2  ロール・権限管理
  L-1  LLM API統合レイヤー
```

### Phase 2 正式版（2026年8-9月目標）── P1タスク

```
InsightSheet: A-3, A-4, B-6, B-7, B-9, C-1, C-2, C-4, C-6, D-4
InsightSlide:       E-3, E-4, F-2, F-4, F-5, G-1
InterviewInsight:   H-5, H-6, I-3, J-1, J-2, J-3
共通基盤:           K-3, L-2, L-3, L-4, M-1, M-2, N-1, N-2, N-4
```

### Phase 3 拡大（2026年10月〜）── P2タスク

```
InsightSheet: A-5, B-8, B-10, C-3, C-5, D-3
InsightSlide:       G-2
InterviewInsight:   I-2, J-4
共通基盤:           M-3, N-3
```

---

## タスク数サマリー

| 製品 | P0 | P1 | P2 | 合計 |
|------|----|----|-----|------|
| InsightSheet | 10 | 10 | 6 | **26** |
| InsightSlide | 5 | 6 | 1 | **12** |
| InterviewInsight | 5 | 6 | 2 | **13** |
| 共通基盤 | 3 | 8 | 2 | **13** |
| **合計** | **23** | **30** | **11** | **64** |

---

## 注意事項

1. **InsightSheetが最大の開発量**（26タスク）── これが3製品の「基盤」であり、データ収集エンジンの新規開発が最も重い
2. **InsightSlideは既存実装あり** ── 安定化・拡充がメイン。全くの新規開発ではない
3. **InterviewInsightは完全新規** ── 音声認識の技術選定が最初のブロッカー
4. **共通基盤は並行開発必須** ── 認証・AI統合は3製品全てが依存する
5. **Syncfusion層とデータ収集層は独立** ── InsightSheetのA系タスク（Syncfusion）とB系タスク（JSONB）は並行開発可能
