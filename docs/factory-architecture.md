# Harmonic Insight Factory - 全体アーキテクチャ図

> あなたの頭の中にある「知識工場」の完全な見取り図

```
══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
                                    HARMONIC INSIGHT FACTORY
                              〜 知識を収集・加工・配信する工場 〜
══════════════════════════════════════════════════════════════════════════════════════════════════════════════════

┌─────────────────────┐      ┌─────────────────────────────────────────────────────────────────┐      ┌─────────────────────┐
│                     │      │                                                                 │      │                     │
│   INPUT SOURCES     │      │                    PROCESSING FACTORY                           │      │   OUTPUT CHANNELS   │
│   (入力ソース)       │  →   │                    (処理工場)                                    │  →   │   (出力チャネル)     │
│                     │      │                                                                 │      │                     │
└─────────────────────┘      └─────────────────────────────────────────────────────────────────┘      └─────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
 LAYER 0: HARDWARE & INFRASTRUCTURE (ハードウェア・インフラ基盤)
═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                                 │
│  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐   ┌─────────────┐    │
│  │  🖥️ Mac     │   │  📱 iPhone  │   │ 📱 iPad     │   │ 🎤 マイク   │   │ 📷 カメラ   │   │ 📟 Scanner  │    │
│  │  (開発機)   │   │  (音声入力) │   │ (手書き)    │   │ (録音)      │   │ (写真)      │   │ (紙→デジタル)│    │
│  └─────────────┘   └─────────────┘   └─────────────┘   └─────────────┘   └─────────────┘   └─────────────┘    │
│                                                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                              ☁️  CLOUD INFRASTRUCTURE                                                    │   │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐              │   │
│  │  │  Vercel   │  │ Supabase  │  │ Firebase  │  │  GitHub   │  │ Cloudflare│  │   Groq    │              │   │
│  │  │ (Hosting) │  │(DB/Vector)│  │  (Auth)   │  │(Git/CI/CD)│  │  (CDN)    │  │(Whisper)  │              │   │
│  │  └───────────┘  └───────────┘  └───────────┘  └───────────┘  └───────────┘  └───────────┘              │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
 DATA FLOW: LEFT → CENTER → RIGHT (データフロー: 入力 → 処理 → 出力)
═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════


┌────────────────────┐          ┌────────────────────────────────────────────────────────┐          ┌────────────────────┐
│                    │          │                                                        │          │                    │
│  📥 INPUT          │          │  ⚙️  PROCESSING                                        │          │  📤 OUTPUT         │
│                    │          │                                                        │          │                    │
├────────────────────┤          ├────────────────────────────────────────────────────────┤          ├────────────────────┤
│                    │          │                                                        │          │                    │
│ ┌────────────────┐ │          │  ┌──────────────────────────────────────────────────┐ │          │ ┌────────────────┐ │
│ │ 📄 PDF/書籍    │ │ ──────── │  │ Stage 1: COLLECTION (収集)                       │ │          │ │ 🖥️ Web App    │ │
│ │ ・技術書      │ │          │  │                                                  │ │          │ │ ・ブラウザ     │ │
│ │ ・マニュアル   │ │          │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐            │ │          │ │ ・Mac              │ │
│ │ ・論文        │ │          │  │  │pdf-parse│ │ Tesseract│ │ Sharp   │            │ │          │ └────────────────┘ │
│ └────────────────┘ │          │  │  │(PDF解析)│ │ (OCR)   │ │(画像処理)│            │ │          │         │          │
│         │          │          │  │  └─────────┘ └─────────┘ └─────────┘            │ │          │         ▼          │
│         ▼          │          │  └──────────────────────────────────────────────────┘ │          │ ┌────────────────┐ │
│ ┌────────────────┐ │          │                         │                             │          │ │ 🪟 Windows App │ │
│ │ 🎤 音声入力    │ │          │                         ▼                             │          │ │ ・デスクトップ  │ │
│ │ ・会議録音    │ │ ──────── │  ┌──────────────────────────────────────────────────┐ │          │ │ ・Electron    │ │
│ │ ・インタビュー │ │          │  │ Stage 2: TRANSFORMATION (変換)                   │ │          │ └────────────────┘ │
│ │ ・独り言メモ  │ │          │  │                                                  │ │          │         │          │
│         ▼          │          │  └──────────────────────────────────────────────────┘ │          │ ┌────────────────┐ │
│ ┌────────────────┐ │          │                         │                             │          │ │ 📱 Mobile App │ │
│ │ 🎤 音声入力    │ │          │                         ▼                             │          │ │ ・iPhone      │ │
│ │ ・会議録音    │ │ ──────── │  ┌──────────────────────────────────────────────────┐ │          │ │ ・iPad        │ │
│ │ ・インタビュー │ │          │  │ Stage 2: TRANSFORMATION (変換)                   │ │          │ │ ・PWA         │ │
│ │ ・独り言メモ  │ │          │  │                                                  │ │          │ └────────────────┘ │
│ └────────────────┘ │          │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐            │ │          │         │          │
│         │          │          │  │  │  Groq   │ │ ffmpeg  │ │VoiceVox │            │ │          │         ▼          │
│         ▼          │          │  │  │(Whisper)│ │(音声変換)│ │ (TTS)   │            │ │          │ ┌────────────────┐ │
│ ┌────────────────┐ │          │  │  │ STT    │ │         │ │         │            │ │ ──────── │ │ 🔊 音声出力   │ │
│ │ 💬 チャット    │ │          │  │  └─────────┘ └─────────┘ └─────────┘            │ │          │ │ ・Podcast     │ │
│ │ ・Slack       │ │          │  │                                                  │ │          │ │ ・オーディオ   │ │
│ │ ・Teams       │ │ ──────── │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐            │ │          │ │ ・読み上げ    │ │
│ │ ・LINE        │ │          │  │  │kuromoji │ │  JBCA   │ │Markdown │            │ │          │ └────────────────┘ │
│ │ ・Discord     │ │          │  │  │(形態素) │ │(感情NLP)│ │ Parser  │            │ │          │         │          │
│ └────────────────┘ │          │  │  └─────────┘ └─────────┘ └─────────┘            │ │          │         ▼          │
│         │          │          │  └──────────────────────────────────────────────────┘ │          │ ┌────────────────┐ │
│         ▼          │          │                         │                             │          │ │ 📖 電子書籍   │ │
│ ┌────────────────┐ │          │                         ▼                             │          │ │ ・Kindle      │ │
│ │ 🌐 Web/API    │ │          │  ┌──────────────────────────────────────────────────┐ │ ──────── │ │ ・EPUB        │ │
│ │ ・Webスクレイピング│          │  │ Stage 3: ENRICHMENT (エンリッチメント)           │ │          │ │ ・PDF出版     │ │
│ │ ・RSS         │ │          │  │                                                  │ │          │ └────────────────┘ │
│ │ ・外部API     │ │ ──────── │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐            │ │          │         │          │
│ └────────────────┘ │          │  │  │ OpenAI  │ │ Claude  │ │ Gemini  │            │ │          │         ▼          │
│         │          │          │  │  │Embedding│ │  (LLM)  │ │  (LLM)  │            │ │          │ ┌────────────────┐ │
│         ▼          │          │  │  └─────────┘ └─────────┘ └─────────┘            │ │          │ │ 🎬 動画       │ │
│ ┌────────────────┐ │          │  │                                                  │ │          │ │ ・YouTube     │ │
│ │ ✍️  手書き     │ │          │  │  ┌─────────────────────────────────────┐        │ │ ──────── │ │ ・スライド    │ │
│ │ ・ノート      │ │ ──────── │  │  │ Vector Embedding (ベクトル化)       │        │ │          │ │ ・解説動画    │ │
│ │ ・ホワイトボード│ │          │  │  │  text-embedding-3-small             │        │ │          │ └────────────────┘ │
│ │ ・付箋        │ │          │  │  └─────────────────────────────────────┘        │ │          │         │          │
│ └────────────────┘ │          │  └──────────────────────────────────────────────────┘ │          │         ▼          │
│                    │          │                         │                             │          │ ┌────────────────┐ │
│                    │          │                         ▼                             │          │ │ 📊 レポート/BI│ │
│                    │          │  ┌──────────────────────────────────────────────────┐ │          │ │ ・自動レポート │ │
│                    │          │  │ Stage 4: STORAGE (蓄積)                          │ │ ──────── │ │ ・ダッシュボード│ │
│                    │          │  │                                                  │ │          │ │ ・分析結果    │ │
│                    │          │  │  ┌─────────────────────────────────────────┐    │ │          │ └────────────────┘ │
│                    │          │  │  │         SUPABASE                        │    │ │          │         │          │
│                    │          │  │  │  ┌───────────┐  ┌───────────────────┐   │    │ │          │         ▼          │
│                    │          │  │  │  │PostgreSQL │  │ pgvector          │   │    │ │          │ ┌────────────────┐ │
│                    │          │  │  │  │ (RDB)     │  │ (Vector Search)   │   │    │ │          │ │ 🤖 Bot/API    │ │
│                    │          │  │  │  └───────────┘  └───────────────────┘   │    │ │ ──────── │ │ ・社内Bot     │ │
│                    │          │  │  │  ┌───────────┐  ┌───────────────────┐   │    │ │          │ │ ・外部API     │ │
│                    │          │  │  │  │ Storage   │  │ Realtime          │   │    │ │          │ │ ・Webhook     │ │
│                    │          │  │  │  │ (Files)   │  │ (WebSocket)       │   │    │ │          │ └────────────────┘ │
│                    │          │  │  │  └───────────┘  └───────────────────┘   │    │ │          │         │          │
│                    │          │  │  └─────────────────────────────────────────┘    │ │          │         ▼          │
│                    │          │  │                                                  │ │          │ ┌────────────────┐ │
│                    │          │  │  ┌─────────────────────────────────────────┐    │ │          │ │ 📧 通知       │ │
│                    │          │  │  │         FIREBASE                        │    │ │ ──────── │ │ ・メール      │ │
│                    │          │  │  │  ┌───────────┐  ┌───────────────────┐   │    │ │          │ │ ・Slack       │ │
│                    │          │  │  │  │   Auth    │  │ Firestore         │   │    │ │          │ │ ・Push通知    │ │
│                    │          │  │  │  │ (認証)    │  │ (NoSQL)           │   │    │ │          │ └────────────────┘ │
│                    │          │  │  │  └───────────┘  └───────────────────┘   │    │ │          │                    │
│                    │          │  │  └─────────────────────────────────────────┘    │ │          │                    │
│                    │          │  └──────────────────────────────────────────────────┘ │          │                    │
│                    │          │                         │                             │          │                    │
│                    │          │                         ▼                             │          │                    │
│                    │          │  ┌──────────────────────────────────────────────────┐ │          │                    │
│                    │          │  │ Stage 5: DELIVERY (配信)                         │ │          │                    │
│                    │          │  │                                                  │ │          │                    │
│                    │          │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐            │ │          │                    │
│                    │          │  │  │ Next.js │ │ Vercel  │ │Cloudflare│            │ │          │                    │
│                    │          │  │  │  (App)  │ │(Deploy) │ │  (CDN)  │            │ │          │                    │
│                    │          │  │  └─────────┘ └─────────┘ └─────────┘            │ │          │                    │
│                    │          │  └──────────────────────────────────────────────────┘ │          │                    │
│                    │          │                                                        │          │                    │
└────────────────────┘          └────────────────────────────────────────────────────────┘          └────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
 LAYER DETAIL: TECHNOLOGY STACK (技術スタック詳細)
═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 🔧 DEVELOPMENT TOOLS (開発ツール)                                                                               │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │   GitHub     │  │ Claude Code  │  │    Cursor    │  │    Docker    │  │     npm      │  │    pnpm      │   │
│  │ (Repository) │  │  (AI Dev)    │  │  (AI IDE)    │  │ (Container)  │  │  (Package)   │  │  (Monorepo)  │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │  TypeScript  │  │    React     │  │   Next.js    │  │   Tailwind   │  │   shadcn/ui  │  │    Prisma    │   │
│  │ (Language)   │  │    (UI)      │  │ (Framework)  │  │    (CSS)     │  │ (Components) │  │    (ORM)     │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 🤖 AI/ML TOOLS (AI・機械学習ツール)                                                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │   Claude     │  │   OpenAI     │  │   Gemini     │  │    Groq      │  │   Whisper    │  │   Ollama     │   │
│  │   (LLM)      │  │   (LLM)      │  │   (LLM)      │  │  (Fast LLM)  │  │   (STT)      │  │ (Local LLM)  │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │   kuromoji   │  │    JBCA      │  │   pgvector   │  │  Embedding   │  │   VoiceVox   │  │   ElevenLabs │   │
│  │ (形態素解析) │  │ (日本語NLP)  │  │(Vector検索)  │  │ (ベクトル化) │  │   (TTS)      │  │    (TTS)     │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 📦 DATA PROCESSING TOOLS (データ処理ツール)                                                                      │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │  pdf-parse   │  │  Tesseract   │  │    Sharp     │  │    ffmpeg    │  │   Mammoth    │  │  pdf-lib     │   │
│  │ (PDF解析)    │  │   (OCR)      │  │  (画像処理)  │  │ (音声/動画)  │  │ (Word変換)   │  │ (PDF生成)    │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │   Cheerio    │  │  Puppeteer   │  │    xlsx      │  │   Marked     │  │  Mermaid     │  │   ReChart    │   │
│  │(HTMLパース)  │  │(スクレイピング)│ │(Excel処理)  │  │ (Markdown)   │  │  (図表)      │  │  (グラフ)    │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
 PRODUCT PORTFOLIO (プロダクトポートフォリオ)
═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                                 │
│                                    ┌─────────────────────────────────┐                                         │
│                                    │      insight-common             │                                         │
│                                    │      (共通基盤)                  │                                         │
│                                    │  ├─ infrastructure/ (認証/DB)   │                                         │
│                                    │  ├─ brand/ (UI/カラー)          │                                         │
│                                    │  └─ nlp/ (JBCA)                 │                                         │
│                                    └────────────┬────────────────────┘                                         │
│                                                 │                                                               │
│                 ┌───────────────────────────────┼───────────────────────────────┐                              │
│                 │                               │                               │                              │
│                 ▼                               ▼                               ▼                              │
│  ┌─────────────────────────┐    ┌─────────────────────────┐    ┌─────────────────────────┐                     │
│  │   harmonic-mart-gen     │    │   insight-slide (INSS)  │    │   insight-py (INPY)     │                     │
│  │   (HMG)                 │    │                         │    │                         │                     │
│  │   知識マート生成         │    │   スライド自動生成       │    │   Python学習支援         │                     │
│  │   ├─ PDF/音声取り込み   │    │   ├─ 資料作成           │    │   ├─ 対話型学習          │                     │
│  │   ├─ チャンキング       │    │   └─ プレゼン生成       │    │   └─ コード実行          │                     │
│  │   └─ Hybrid Search     │    │                         │    │                         │                     │
│  └─────────────────────────┘    └─────────────────────────┘    └─────────────────────────┘                     │
│                 │                               │                               │                              │
│                 ▼                               ▼                               ▼                              │
│  ┌─────────────────────────┐    ┌─────────────────────────┐    ┌─────────────────────────┐                     │
│  │   insight-issue-mgmt    │    │   insight-journal       │    │   pixie (Interview)     │                     │
│  │                         │    │   (INJL)                │    │                         │                     │
│  │   タスク管理            │    │   ジャーナル/メモ        │    │   インタビュー分析       │                     │
│  │   ├─ 音声タスク抽出     │    │   ├─ 日記              │    │   ├─ 録音文字起こし      │                     │
│  │   ├─ 感情分析(JBCA)    │    │   └─ ふりかえり         │    │   └─ 感情・要点抽出      │                     │
│  │   └─ スケジュール連携  │    │                         │    │                         │                     │
│  └─────────────────────────┘    └─────────────────────────┘    └─────────────────────────┘                     │
│                                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
 DATA LIFECYCLE (データライフサイクル)
═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════

  Raw Data          Structured          Enriched            Indexed             Delivered
  (生データ)         (構造化)            (拡張)              (インデックス化)      (配信)

    📄                 📋                  🧠                  🔍                  📱
    │                  │                   │                   │                   │
    │   pdf-parse      │   kuromoji        │   LLM             │   pgvector        │   Next.js
    │   Whisper        │   JBCA            │   Embedding       │   Full-text       │   API
    │   OCR            │   Markdown        │   Summarize       │   Hybrid Search   │   Push
    │                  │                   │                   │                   │
    ▼                  ▼                   ▼                   ▼                   ▼
┌────────┐       ┌────────────┐      ┌────────────┐      ┌────────────┐      ┌────────────┐
│ Input  │  →   │ Transform  │  →   │  Enrich    │  →   │   Store    │  →   │  Output    │
│        │       │            │      │            │      │            │      │            │
│ PDF    │       │ JSON/      │      │ + Vector   │      │ Supabase   │      │ Web App    │
│ Audio  │       │ Markdown   │      │ + Summary  │      │ Firebase   │      │ Mobile     │
│ Text   │       │ Tokens     │      │ + Emotion  │      │ Search     │      │ Kindle     │
│ Image  │       │            │      │            │      │            │      │ API        │
└────────┘       └────────────┘      └────────────┘      └────────────┘      └────────────┘

    │                  │                   │                   │                   │
    └──────────────────┴───────────────────┴───────────────────┴───────────────────┘
                                           │
                                    JSONL (Data Warehouse)
                                    observed_at | source_type | content


═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
 DEPLOYMENT PIPELINE (デプロイパイプライン)
═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════

┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                                                                                                │
│   Developer        GitHub           GitHub Actions        Vercel            Production                        │
│   (開発者)         (Repository)     (CI/CD)              (Hosting)         (本番)                            │
│                                                                                                                │
│   ┌─────┐         ┌─────────┐       ┌─────────────┐      ┌─────────┐       ┌─────────────┐                   │
│   │     │  push   │         │ trigger│             │deploy│         │ serve │             │                   │
│   │ 👨‍💻 │ ────── │  main   │───────│  Build      │──────│ Vercel  │───────│  Users      │                   │
│   │     │         │  branch │       │  Test       │      │  Edge   │       │  🌍         │                   │
│   └─────┘         └─────────┘       │  Lint       │      └─────────┘       └─────────────┘                   │
│      │                              │  Type Check │           │                                               │
│      │ Claude Code                  └─────────────┘           │                                               │
│      │ (AI Pair Programming)                                  │                                               │
│      ▼                                                        ▼                                               │
│   ┌─────────────┐                                      ┌─────────────┐                                        │
│   │ Local Dev   │                                      │ Cloudflare  │                                        │
│   │ Environment │                                      │ (CDN/WAF)   │                                        │
│   └─────────────┘                                      └─────────────┘                                        │
│                                                                                                                │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════
```

## 要約: Harmonic Insight Factory の本質

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   「あらゆる情報を取り込み、知識として蓄積し、                    │
│     必要な形で必要な場所に届ける」                               │
│                                                                 │
│   INPUT: どんな形式でも受け入れる (PDF, 音声, 手書き, Web...)    │
│   PROCESS: AI + ルールベースで意味を抽出・構造化                │
│   OUTPUT: どんな形式でも出力できる (App, Audio, Book, API...)   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

*Document Version: 1.0.0*
*Last Updated: 2026-01-12*
*Author: Harmonic Insight Team*
